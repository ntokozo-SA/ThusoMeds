<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clinic Pre-Arrival Triage</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <main class="container">

    <section class="nearest-hospital">
      <h3>📍 Nearest Facility</h3>
      <p id="nearestHospital">Detecting nearest hospital or clinic...</p>
    </section>

    <section class="form-section">
      <form id="triageForm">
        <h3>📝 1. Basic Info</h3>
        <div class="input">
            <div class="box">
                <input type="text" name="fullname" placeholder="Full Name" class = "user-input" required>
            </div>
            <div class="box">
                <input type="text" name="id" placeholder="ID/Passport (optional)" class = "user-input">
            </div>
            <div class="box">
                <input type="number" name="age" placeholder="Age" class = "user-input" required>
            </div>
            
        </div>
        <div class="box">
          <select name="gender" required>
          <option value="">Select Gender</option>
          <option>Male</option>
          <option>Female</option>
          <option>Other</option>
        </select>  
        </div>
        <div class="box">
          <input type="text" name="contact" placeholder="Phone / WhatsApp" required>
        </div>
        <div class="box">
          <input type="email" name="email" placeholder="Email (optional)">
        </div>
        

        <h3>📌 2. Visit Type</h3>
        <label><input type="radio" name="visitType" value="First time"> First time</label><br>
        <label><input type="radio" name="visitType" value="Follow-up"> Follow-up</label><br>
        <label><input type="radio" name="visitType" value="Emergency"> Emergency</label><br>

        <h3>🤒 3. Symptoms Checklist</h3>
        <label><input type="checkbox" name="symptoms" value="Fever"> Fever</label><br>
        <label><input type="checkbox" name="symptoms" value="Cough"> Cough / Sore throat</label><br>
        <label><input type="checkbox" name="symptoms" value="Chest pain"> Chest pain / Shortness of breath</label><br>
        <label><input type="checkbox" name="symptoms" value="Stomach pain"> Stomach pain / Vomiting / Diarrhoea</label><br>
        <label><input type="checkbox" name="symptoms" value="Headache"> Headache / Dizziness</label><br>
        <label><input type="checkbox" name="symptoms" value="Injury"> Injury (burn, cut, fracture)</label><br>
        <input type="text" name="otherSymptoms" placeholder="Other symptoms">

        <h3>⏱️ 4. Symptom Duration</h3>
        <label><input type="radio" name="duration" value="Less than 24 hrs"> Less than 24 hrs</label><br>
        <label><input type="radio" name="duration" value="1–3 days"> 1–3 days</label><br>
        <label><input type="radio" name="duration" value="More than 3 days"> More than 3 days</label><br>

        <h3>⚠️ 5. Risk Questions</h3>
        <label>On chronic medication? 
          <input type="radio" name="chronic" value="Yes"> Yes 
          <input type="radio" name="chronic" value="No"> No
        </label><br>
        <label>Diabetes / BP / HIV / TB? 
          <input type="radio" name="conditions" value="Yes"> Yes 
          <input type="radio" name="conditions" value="No"> No
        </label><br>
        <label>Contact with sick person? 
          <input type="radio" name="contactSick" value="Yes"> Yes 
          <input type="radio" name="contactSick" value="No"> No
        </label><br><br>

        <h3>🚗 6. Location & ETA</h3>
        <div class="box">
          <select name="arrival_mode" required>
            <option value="">How are you arriving?</option>
            <option value="private car">Private Car</option>
            <option value="ambulance">Ambulance</option>
            <option value="public transport">Public Transport</option>
            <option value="walking">Walking</option>
            <option value="other">Other</option>
          </select>
        </div>
        
        <div class="box" id="locationSection" style="display: none;">
          <label>📍 Your Current Location (for ETA calculation)</label>
          <div class="location-options">
            <label><input type="radio" name="locationType" value="gps" checked> Use GPS Location</label>
            <label><input type="radio" name="locationType" value="address"> Enter Address</label>
          </div>
          
          <div id="gpsLocation" class="location-input">
            <button type="button" id="getLocationBtn" class="button secondary">📍 Get My Location</button>
            <input type="hidden" name="car_lat" id="carLat">
            <input type="hidden" name="car_lng" id="carLng">
            <p id="locationStatus"></p>
          </div>
          
          <div id="addressLocation" class="location-input" style="display: none;">
            <input type="text" name="car_address" placeholder="Enter your address (e.g., Sandton City, Johannesburg)">
          </div>
        </div>

        <div class="action-buttons">
          <button class="button" type="submit">🚑 Submit Triage</button>
          <button class="button secondary" type="reset">♻️ Reset</button>
        </div>
      </form>
    </section>

    <section class="result-section" id="resultSection" aria-live="polite">
      <div class="loading" id="loading">
        <div class="spinner"></div>
        <p>⏳ Processing your information...</p>
      </div>

      <div class="result-card" id="resultCard">
        <div class="result-title">🎟️ Your Ticket</div>
        <p id="ticketNumber"></p>
        <p id="severityLevel"></p>
        <div id="etaInfo" style="display: none;">
          <div class="eta-card">
            <h4>⏰ Estimated Arrival Time</h4>
            <p id="etaMinutes"></p>
            <p id="etaDetails"></p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>
